{
    "global": {
        "title": "Macro Hero",
        "width": 600,
        "height": 500,
        "variables": {
            "playerName": {
                "expression": "Local.value('playerName', 'Unknown Hero')"
            }
        }
    },
    "pages": [
        {
            "label": "General",
            "variables": {
                "token": {
                    "expression": "'57cefc5e-23b0-40f8-ad32-31a1c331c501'"
                },
                "hp": {
                    "expression": "100"
                },
                "speedBonus": {
                    "expression": "GoogleSheets.getValue('MacroHero', 'A1')"
                },
                "atkBonus": {
                    "expression": "floor({speedBonus} / 10)"
                },
                "defBonus": {
                    "expression": "1"
                },
                "isBandaged": {
                    "expression": "ConditionsMarkers.isCondition({token}, 'Bandaged')"
                },
                "bandagedValue": {
                    "expression": "ConditionsMarkers.getValue({token}, 'Bandaged')"
                },
                "trackerStatus": {
                    "expression": "OwlTrackers.getValue({token}, 'HP')"
                }
            },
            "layout": [
                {
                    "type": "title",
                    "text": "General Actions"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "speedBonus",
                            "label": "speedBonus Label"
                        },
                        {
                            "type": "value",
                            "var": "atkBonus",
                            "label": "Bonus ATK"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('1d20 + {atkBonus}')"
                    ],
                    "label": "Roll Attack"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "isBandaged",
                            "label": "isBandaged"
                        },
                        {
                            "type": "value",
                            "var": "bandagedValue",
                            "label": "bandagedValue"
                        }
                    ]
                },
                {
                    "type": "title",
                    "text": "Owl Trackers Integration"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "trackerStatus",
                            "label": "Tracker HP"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "OwlTrackers.setValue({token}, 'HP', floor(OwlTrackers.getValue({token}, 'HP')*1.1))"
                    ],
                    "label": "Heal 1 tick"
                },
                {
                    "type": "button",
                    "commands": [
                        "{isBandaged} ? OwlTrackers.addValue({token}, 'HP', 10) : OwlTrackers.addValue({token}, 'HP', -10)"
                    ],
                    "label": "Test Button"
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('1d20 + {atkBonus}') > 15 ? OwlTrackers.addValue({token}, 'HP', 5) : OwlTrackers.addValue({token}, 'HP', -5)"
                    ],
                    "label": "Roll Attack (>15 = heal, <=15 = damage)"
                }
            ]
        },
        {
            "label": "Advanced",
            "variables": {
                "textVar": {
                    "expression": "'Hello World'"
                },
                "numberVar": {
                    "expression": "42"
                },
                "counterVar": {
                    "expression": "10"
                },
                "checkboxVar": {
                    "expression": "true"
                },
                "inputVar": {
                    "expression": "'Enter text here'"
                }
            },
            "layout": [
                {
                    "type": "title",
                    "text": "Layout Examples"
                },
                {
                    "type": "text",
                    "content": "This page demonstrates all available layout types"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "text": "Display Types"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "textVar",
                            "label": "Text Value"
                        },
                        {
                            "type": "value",
                            "var": "numberVar",
                            "label": "Number Value"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "text": "Input Types"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "counter",
                            "var": "counterVar",
                            "label": "Counter",
                            "step": 5
                        },
                        {
                            "type": "counter",
                            "var": "numberVar",
                            "label": "Counter (step 1)"
                        }
                    ]
                },
                {
                    "type": "input",
                    "var": "inputVar",
                    "label": "Text Input",
                    "placeholder": "Type something..."
                },
                {
                    "type": "checkbox",
                    "var": "checkboxVar",
                    "label": "Checkbox Example"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "text": "Button"
                },
                {
                    "type": "button",
                    "label": "Example Button",
                    "commands": [
                        "JustDices.roll('1d20')"
                    ]
                }
            ]
        },
        {
            "label": "Xalithra",
            "variables": {
                "token": {
                    "expression": "'57cefc5e-23b0-40f8-ad32-31a1c331c501'"
                },
                "stats": {
                    "expression": "GoogleSheets.getRange('Xalithra Général', 'T4:T8')"
                },
                "atk": {
                    "expression": "floor({stats[0]} * (1 + {atkCS} * ({atkCS} > 0 ? 0.2 : -0.1)))"
                },
                "def": {
                    "expression": "floor({stats[1]} * (1 + {defCS} * ({defCS} > 0 ? 0.2 : -0.1)))"
                },
                "spatk": {
                    "expression": "floor({stats[2]} * (1 + {spatkCS} * ({spatkCS} > 0 ? 0.2 : -0.1)))"
                },
                "spdef": {
                    "expression": "floor({stats[3]} * (1 + {spdefCS} * ({spdefCS} > 0 ? 0.2 : -0.1)))"
                },
                "spd": {
                    "expression": "floor({stats[4]} * (1 + {spdCS} * ({spdCS} > 0 ? 0.2 : -0.1)))"
                },
                "atkCS": {
                    "expression": "0",
                    "min": -6,
                    "max": 6
                },
                "defCS": {
                    "expression": "0",
                    "min": -6,
                    "max": 6
                },
                "spatkCS": {
                    "expression": "0",
                    "min": -6,
                    "max": 6
                },
                "spdefCS": {
                    "expression": "0",
                    "min": -6,
                    "max": 6
                },
                "spdCS": {
                    "expression": "0",
                    "min": -6,
                    "max": 6
                },
                "isCrit": {
                    "expression": "false"
                },
                "recklessAdvance": {
                    "expression": "false"
                },
                "injuries": {
                    "expression": "OwlTrackers.getValue({token}, 'Injuries')"
                },
                "intimidate": {
                    "expression": "GoogleSheets.getValue('Xalithra Général', 'C11')"
                },
                "pushItToTheLimit": {
                    "expression": "false"
                },
                "weaponDB": {
                    "expression": "GoogleSheets.getValue('Xalithra Général', 'G35')"
                }
            },
            "layout": [
                {
                    "type": "title",
                    "text": "Xalithra Stats"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "atk",
                            "label": "ATK"
                        },
                        {
                            "type": "value",
                            "var": "def",
                            "label": "DEF"
                        },
                        {
                            "type": "value",
                            "var": "spatk",
                            "label": "SP.ATK"
                        },
                        {
                            "type": "value",
                            "var": "spdef",
                            "label": "SP.DEF"
                        },
                        {
                            "type": "value",
                            "var": "spd",
                            "label": "SPD"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "counter",
                            "var": "atkCS",
                            "label": "ATK CS"
                        },
                        {
                            "type": "counter",
                            "var": "defCS",
                            "label": "DEF CS"
                        },
                        {
                            "type": "counter",
                            "var": "spatkCS",
                            "label": "SP.ATK CS"
                        },
                        {
                            "type": "counter",
                            "var": "spdefCS",
                            "label": "SP.DEF CS"
                        },
                        {
                            "type": "counter",
                            "var": "spdCS",
                            "label": "SPD CS"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "checkbox",
                            "var": "pushItToTheLimit",
                            "label": "Push it to the Limit"
                        },
                        {
                            "type": "checkbox",
                            "var": "isCrit",
                            "label": "Critical Hit"
                        },
                        {
                            "type": "checkbox",
                            "var": "recklessAdvance",
                            "label": "Reckless Advance"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "addValue('atkCS', +1)",
                                "addValue('defCS', -1)",
                                "addValue('spatkCS', +1)",
                                "addValue('spdefCS', -1)",
                                "addValue('spdCS', +1)",
                                "OwlTrackers.addValue({token}, 'Injuries', +1)",
                                "OwlTrackers.setValue({token}, 'HP', min(OwlTrackers.getValue({token}, 'HP'), OwlTrackers.getMax({token}, 'HP') * max(1 - OwlTrackers.getValue({token}, 'Injuries') * 0.1, 0.5)))"
                            ],
                            "label": "Anger Shell"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "OwlTrackers.setValue({token}, 'HP', min(OwlTrackers.getValue({token}, 'HP') + OwlTrackers.getMax({token}, 'HP') * 0.05, OwlTrackers.getMax({token}, 'HP') * max(1 - OwlTrackers.getValue({token}, 'Injuries') * 0.1, 0.5)))"
                            ],
                            "label": "Regeneration"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "JustDices.roll('{{isCrit}+1}db{5+{weaponDB}/3+{injuries}} + {{pushItToTheLimit}+1}*({intimidate}+{injuries}) + {{recklessAdvance}*8} + {atk}')"
                            ],
                            "label": "Flail"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "JustDices.roll('{{isCrit}+1}db{6+{weaponDB}/3} + {{pushItToTheLimit}+1}*({intimidate}+{injuries}) + {{recklessAdvance}*8} + {atk}')"
                            ],
                            "label": "Rage"
                        }
                    ]
                }
            ]
        }
    ]
}