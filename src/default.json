{
    "global": {
        "title": "Macro Hero",
        "width": 800,
        "height": 600,
        "variables": {
            "playerName": {
                "eval": "Local.value('playerName', 'myGlobalVarPlayerName')"
            }
        }
    },
    "pages": [
        {
            "label": "Integrations",
            "variables": {
                "token": {
                    "value": "57cefc5e-23b0-40f8-ad32-31a1c331c501"
                },
                "sheetValue": {
                    "eval": "GoogleSheets.getValue('Xalithra Général', 'G26:I26')"
                },
                "inputName": {
                    "value": "Enter name here"
                },
                "isBandaged": {
                    "eval": "ConditionsMarkers.hasCondition(token, 'Bandaged')"
                },
                "conditionValue": {
                    "eval": "ConditionsMarkers.getValue(token, 'Bandaged')"
                },
                "trackerHP": {
                    "eval": "OwlTrackers.getValue(token, 'HP')"
                },
                "trackerMaxHP": {
                    "eval": "OwlTrackers.getMax(token, 'HP')"
                },
                "bubbleHealth": {
                    "eval": "StatBubbles.getValue(token, 'health')"
                },
                "bubbleMaxHealth": {
                    "eval": "StatBubbles.getValue(token, 'max health')"
                },
                "bubbleAC": {
                    "eval": "StatBubbles.getValue(token, 'armor class')"
                },
                "ringColors": {
                    "eval": "ColoredRings.getRings(token)"
                },
                "hasBlueRing": {
                    "eval": "ColoredRings.hasRing(token, '#1a6aff')"
                },
                "prettyHasInitiative": {
                    "eval": "PrettySordid.hasInitiative(token)"
                },
                "prettyInitiativeCount": {
                    "eval": "PrettySordid.getInitiativeCount(token)"
                },
                "prettyActive": {
                    "eval": "PrettySordid.isActiveTurn(token)"
                }
            },
            "layout": [
                {
                    "type": "title",
                    "expression": "{sheetValue}"
                },
                {
                    "type": "text",
                    "expression": "{sheetValue}"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "sheetValue",
                            "label": "Cell A1"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Conditions Markers"
                },
                {
                    "type": "text",
                    "expression": "Check and read condition markers on tokens"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "isBandaged",
                            "label": "Has Bandaged?"
                        },
                        {
                            "type": "value",
                            "var": "conditionValue",
                            "label": "Bandaged Value"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "isBandaged ? OwlTrackers.addValue(token, 'HP', 10) : OwlTrackers.addValue(token, 'HP', -5)"
                    ],
                    "label": "Heal if Bandaged"
                },
                {
                    "type": "button",
                    "commands": [
                        "ConditionsMarkers.toggleCondition(token, 'Bandaged')"
                    ],
                    "label": "Toggle Bandage"
                },
                {
                    "type": "button",
                    "commands": [
                        "ConditionsMarkers.addCondition(token, 'Bandaged', conditionValue + 1)"
                    ],
                    "label": "Increment Bandage"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Owl Trackers"
                },
                {
                    "type": "text",
                    "expression": "Get and modify tracker values on tokens"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "trackerHP",
                            "label": "HP"
                        },
                        {
                            "type": "value",
                            "var": "trackerMaxHP",
                            "label": "Max HP"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "OwlTrackers.addValue(token, 'HP', 10)"
                            ],
                            "label": "Heal 10"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "OwlTrackers.addValue(token, 'HP', -5)"
                            ],
                            "label": "Damage 5"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "OwlTrackers.setValue(token, 'HP', trackerMaxHP)"
                    ],
                    "label": "Heal to Max"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "StatBubbles"
                },
                {
                    "type": "text",
                    "expression": "Manage health, AC, and temp HP via StatBubbles extension"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "bubbleHealth",
                            "label": "Health"
                        },
                        {
                            "type": "value",
                            "var": "bubbleMaxHealth",
                            "label": "Max"
                        },
                        {
                            "type": "value",
                            "var": "bubbleAC",
                            "label": "AC"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "StatBubbles.heal(token, 15)"
                            ],
                            "label": "Heal 15"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "StatBubbles.damage(token, 8)"
                            ],
                            "label": "Damage 8"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "StatBubbles.setValue(token, 'temporary health', 20)"
                            ],
                            "label": "Set Temp HP 20"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "StatBubbles.addValue(token, 'armor class', 2)"
                            ],
                            "label": "AC +2"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Colored Rings"
                },
                {
                    "type": "text",
                    "expression": "Add and remove colored status rings on tokens"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "hasBlueRing",
                            "label": "Has Blue Ring?"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "ColoredRings.addRing(token, '#1a6aff')"
                            ],
                            "label": "Add Blue"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "ColoredRings.addRing(token, '#ff7433')"
                            ],
                            "label": "Add Orange"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "ColoredRings.addRing(token, '#00ff00')"
                            ],
                            "label": "Add Green"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "ColoredRings.removeRing(token, '#1a6aff')"
                            ],
                            "label": "Remove Blue"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "ColoredRings.removeRing(token, '#ff7433')"
                            ],
                            "label": "Remove Orange"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "ColoredRings.removeRing(token, '#00ff00')"
                            ],
                            "label": "Remove Green"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Pretty Sordid"
                },
                {
                    "type": "text",
                    "expression": "Example compatibility for the PrettySordid / Pretty Initiative extension — read and modify initiative stored in token metadata."
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "prettyHasInitiative",
                            "label": "Has Initiative?"
                        },
                        {
                            "type": "value",
                            "var": "prettyInitiativeCount",
                            "label": "Initiative"
                        },
                        {
                            "type": "value",
                            "var": "prettyActive",
                            "label": "Active?"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "PrettySordid.hasInitiative(token) ? PrettySordid.setInitiativeCount(token, PrettySordid.getInitiativeCount(token) + 1) : PrettySordid.setInitiativeCount(token, 1)"
                            ],
                            "label": "Increment / Assign 1"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "PrettySordid.hasInitiative(token) ? PrettySordid.setInitiativeCount(token, PrettySordid.getInitiativeCount(token) - 1) : null"
                            ],
                            "label": "Decrement"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "PrettySordid.setInitiativeCount(token, 0)"
                            ],
                            "label": "Reset to 0"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "JustDices"
                },
                {
                    "type": "text",
                    "expression": "Roll dice and get results in Owlbear Rodeo"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "JustDices.roll('1d20')"
                            ],
                            "label": "Roll d20"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "JustDices.roll('2d6 + 3')"
                            ],
                            "label": "Roll 2d6+3"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('1d20 + ' + bubbleAC) > 15 ? StatBubbles.damage(token, 10) : null"
                    ],
                    "label": "Attack Roll (DC 15)"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Local Storage"
                },
                {
                    "type": "text",
                    "expression": "Store and retrieve values in browser localStorage"
                },
                {
                    "type": "input",
                    "var": "inputName",
                    "label": "Enter Name",
                    "placeholder": "Type a name..."
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "JustDices.roll('Global Player Name: ' + playerName)"
                            ],
                            "label": "Show Global Name"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "JustDices.roll('Input Name: ' + inputName)"
                            ],
                            "label": "Show Input Name"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "Local.set('playerName', 'Xalithra')"
                    ],
                    "label": "Save Player Name"
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('Player: ' + Local.value('playerName', 'Unknown'))"
                    ],
                    "label": "Show Player Name"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Weather Tests"
                },
                {
                    "type": "text",
                    "expression": "Add weather effects to maps"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'SNOW', speed: 2, density: 3 })"
                            ],
                            "label": "Snow"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'RAIN', speed: 3, density: 4 })"
                            ],
                            "label": "Rain"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'SAND', speed: 2, density: 3 })"
                            ],
                            "label": "Sand"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'FIRE', speed: 1, density: 2 })"
                            ],
                            "label": "Fire"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'CLOUD', speed: 1, density: 3 })"
                            ],
                            "label": "Cloud"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'BLOOM', speed: 1, density: 2 })"
                            ],
                            "label": "Bloom"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'ENERGYSTORM', speed: 2, density: 3 })"
                            ],
                            "label": "Energy Storm"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'WATER', speed: 1, density: 2 })"
                            ],
                            "label": "Water"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.setWeather(mapId, { type: 'CURRENT', speed: 2, density: 3 })"
                            ],
                            "label": "Current"
                        }
                    ]
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.updateWeather(mapId, { tint: '#88aaff' })",
                                "console.log('Blue tint applied')"
                            ],
                            "label": "Blue Tint"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.updateWeather(mapId, { tint: '#ff8844' })",
                                "console.log('Orange tint applied')"
                            ],
                            "label": "Orange Tint"
                        },
                        {
                            "type": "button",
                            "commands": [
                                "mapId = await sceneHelpers.getMapIdFromToken(token)",
                                "Weather.removeWeather(mapId)",
                                "console.log('Weather removed')"
                            ],
                            "label": "Remove Weather"
                        }
                    ]
                }
            ]
        },
        {
            "label": "Layout",
            "variables": {
                "textVar": {
                    "value": "Hello World"
                },
                "numberVar": {
                    "value": 42
                },
                "counterVar": {
                    "value": 10
                },
                "checkboxVar": {
                    "value": true
                },
                "inputVar": {
                    "value": "Enter text here"
                },
                "dropdownVar": {
                    "value": "Option 1"
                },
                "dropdownModeVar": {
                    "value": "normal"
                }
            },
            "layout": [
                {
                    "type": "title",
                    "expression": "Layout Examples"
                },
                {
                    "type": "text",
                    "expression": "This page demonstrates all available layout types"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Display Types"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "textVar",
                            "label": "Text Value"
                        },
                        {
                            "type": "value",
                            "var": "numberVar",
                            "label": "Number Value"
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Input Types"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "counter",
                            "var": "counterVar",
                            "label": "Counter",
                            "step": 5
                        },
                        {
                            "type": "counter",
                            "var": "numberVar",
                            "label": "Counter (step 1)"
                        }
                    ]
                },
                {
                    "type": "input",
                    "var": "inputVar",
                    "label": "Text Input",
                    "placeholder": "Type something..."
                },
                {
                    "type": "checkbox",
                    "var": "checkboxVar",
                    "label": "Checkbox Example"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "dropdown",
                            "var": "dropdownVar",
                            "label": "Dropdown Example",
                            "options": [
                                "Option 1",
                                "Option 2",
                                "Option 3"
                            ]
                        },
                        {
                            "type": "dropdown",
                            "var": "dropdownModeVar",
                            "label": "Game Mode",
                            "options": [
                                {
                                    "label": "Easy",
                                    "value": "easy"
                                },
                                {
                                    "label": "Normal",
                                    "value": "normal"
                                },
                                {
                                    "label": "Hard",
                                    "value": "hard"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Stack Demo"
                },
                {
                    "type": "text",
                    "expression": "Demonstrates the `stack` container."
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "text",
                            "expression": "This is a row containing a stack:"
                        },
                        {
                            "type": "stack",
                            "children": [
                                {
                                    "type": "value",
                                    "var": "textVar",
                                    "label": "Base Value"
                                },
                                {
                                    "type": "button",
                                    "label": "Button",
                                    "commands": [
                                        "JustDices.roll('1d6')"
                                    ]
                                },
                                {
                                    "type": "button",
                                    "label": "Button",
                                    "commands": [
                                        "JustDices.roll('1d6')"
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Button"
                },
                {
                    "type": "button",
                    "label": "Example Button",
                    "commands": [
                        "JustDices.roll('1d20')"
                    ]
                }
            ]
        },
        {
            "label": "Tests",
            "variables": {
                "spdCS": {
                    "value": 15
                },
                "floorResult": {
                    "eval": "Math.floor(spdCS / 2)"
                },
                "testToken": {
                    "value": "57cefc5e-23b0-40f8-ad32-31a1c331c501"
                },
                "mapIdFromToken": {
                    "eval": "sceneHelpers.getMapIdFromToken(testToken)"
                }
            },
            "layout": [
                {
                    "type": "title",
                    "expression": "Testing Area"
                },
                {
                    "type": "text",
                    "expression": "Use this page for testing new features and commands."
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "spdCS",
                            "label": "spdCS"
                        },
                        {
                            "type": "value",
                            "var": "floorResult",
                            "label": "floor({spdCS}/2)"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('floorResult: ' + floorResult)"
                    ],
                    "label": "Show floor result"
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('1d10')"
                    ],
                    "label": "Test Roll"
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('1d10')"
                    ],
                    "label": "Test Roll2"
                },
                {
                    "type": "button",
                    "commands": [
                        "JustDices.roll('1d10 + ' + spdCS)"
                    ],
                    "label": "Test with spdCS"
                },
                {
                    "type": "button",
                    "commands": [
                        "result = await JustDices.roll('1d20')",
                        "message = result > 10 ? 'Effect' : 'No Effect'",
                        "message += result == 20 ? ' (Critical)' : ''",
                        "console.log(`Result: ${result} - ${message}`)"
                    ],
                    "label": "Test Async"
                },
                {
                    "type": "divider"
                },
                {
                    "type": "title",
                    "expression": "Scene Helpers Tests"
                },
                {
                    "type": "text",
                    "expression": "Test scene helper functions"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "value",
                            "var": "mapIdFromToken",
                            "label": "Map ID"
                        }
                    ]
                },
                {
                    "type": "button",
                    "commands": [
                        "mapId = await sceneHelpers.getMapIdFromToken(testToken)",
                        "console.log('Map ID: ' + (mapId || 'Not on a map'))"
                    ],
                    "label": "Get Map ID from Token"
                }
            ]
        }
    ]
}