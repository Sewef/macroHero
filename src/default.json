{
  "global": {
    "title": "Default Config for MacroHero",
    "width": 800,
    "height": 600,
    "variables": {
      "playerName": {
        "eval": "Local.value('playerName', 'myGlobalVarPlayerName')"
      }
    }
  },
  "pages": [
    {
      "label": "Google Sheets",
      "variables": {
        "sheetValue": {
          "eval": "GoogleSheets.getValue('Xalithra Général', 'G26:I26')"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Google Sheets Integration"
        },
        {
          "type": "text",
          "text": "Read data from Google Sheets (read-only)"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "{sheetValue}"
        },
        {
          "type": "text",
          "text": "{sheetValue}"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "sheetValue",
              "label": "Cell Value"
            }
          ]
        }
      ]
    },
    {
      "label": "Conditions",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "isBandaged": {
          "eval": "ConditionMarkers.hasCondition(token, 'Bandaged')"
        },
        "conditionValue": {
          "eval": "ConditionMarkers.getValue(token, 'Bandaged')"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Condition Markers"
        },
        {
          "type": "text",
          "text": "Check and read condition markers on tokens"
        },
        {
          "type": "divider"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "isBandaged",
              "label": "Has Bandaged?"
            },
            {
              "type": "value",
              "var": "conditionValue",
              "label": "Bandaged Value"
            }
          ]
        },
        {
          "type": "button",
          "commands": [
            "isBandaged ? console.log('Has Bandaged condition') : console.log('No Bandaged condition');"
          ],
          "label": "Check Condition"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Manage Conditions"
        },
        {
          "type": "button",
          "commands": [
            "await ConditionMarkers.toggleCondition(token, 'Bandaged');"
          ],
          "label": "Toggle Bandage"
        },
        {
          "type": "button",
          "commands": [
            "await ConditionMarkers.addCondition(token, 'Bandaged', conditionValue + 1);"
          ],
          "label": "Increment Bandage"
        },
        {
          "type": "button",
          "commands": [
            "await ConditionMarkers.removeCondition(token, 'Bandaged');"
          ],
          "label": "Remove Bandage"
        },
        {
          "type": "button",
          "commands": [
            "await ConditionMarkers.clearAllConditions(token);"
          ],
          "label": "Clear All Conditions"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Common Conditions"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await ConditionMarkers.addCondition(token, 'Poisoned');"
              ],
              "label": "Poisoned"
            },
            {
              "type": "button",
              "commands": [
                "await ConditionMarkers.addCondition(token, 'Stunned');"
              ],
              "label": "Stunned"
            },
            {
              "type": "button",
              "commands": [
                "await ConditionMarkers.addCondition(token, 'Prone');"
              ],
              "label": "Prone"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await ConditionMarkers.addCondition(token, 'Paralyzed');"
              ],
              "label": "Paralyzed"
            },
            {
              "type": "button",
              "commands": [
                "await ConditionMarkers.addCondition(token, 'Blessed');"
              ],
              "label": "Blessed"
            },
            {
              "type": "button",
              "commands": [
                "await ConditionMarkers.addCondition(token, 'Concentrating');"
              ],
              "label": "Concentrating"
            }
          ]
        }
      ]
    },
    {
      "label": "Trackers",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "trackerHP": {
          "eval": "OwlTrackers.getValue(token, 'HP')"
        },
        "trackerMaxHP": {
          "eval": "OwlTrackers.getMax(token, 'HP')"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Owl Trackers"
        },
        {
          "type": "text",
          "text": "Get and modify tracker values on tokens"
        },
        {
          "type": "divider"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "trackerHP",
              "label": "HP"
            },
            {
              "type": "value",
              "var": "trackerMaxHP",
              "label": "Max HP"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "HP Management"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await OwlTrackers.addValue(token, 'HP', 10);"
              ],
              "label": "Heal 10"
            },
            {
              "type": "button",
              "commands": [
                "await OwlTrackers.addValue(token, 'HP', 5);"
              ],
              "label": "Heal 5"
            },
            {
              "type": "button",
              "commands": [
                "await OwlTrackers.setValue(token, 'HP', trackerMaxHP);"
              ],
              "label": "Full Heal"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await OwlTrackers.addValue(token, 'HP', -5);"
              ],
              "label": "Damage 5"
            },
            {
              "type": "button",
              "commands": [
                "await OwlTrackers.addValue(token, 'HP', -10);"
              ],
              "label": "Damage 10"
            },
            {
              "type": "button",
              "commands": [
                "await OwlTrackers.setValue(token, 'HP', 0);"
              ],
              "label": "Down to 0"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Add Tracker"
        },
        {
          "type": "button",
          "commands": [
            "await OwlTrackers.addTracker(token, {",
            "  variant: 'value-max',",
            "  name: 'HP',",
            "  value: 50,",
            "  max: 50,",
            "  color: 2",
            "});"
          ],
          "label": "Add HP Tracker (50/50)"
        },
        {
          "type": "button",
          "commands": [
            "await OwlTrackers.addTracker(token, {",
            "  variant: 'value',",
            "  name: 'Temp HP',",
            "  value: 10,",
            "  color: 5",
            "});"
          ],
          "label": "Add Temp HP (10)"
        },
        {
          "type": "button",
          "commands": [
            "await OwlTrackers.removeTracker(token, 'HP');"
          ],
          "label": "Remove HP Tracker"
        }
      ]
    },
    {
      "label": "StatBubbles",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "bubbleHealth": {
          "eval": "StatBubbles.getValue(token, 'health')"
        },
        "bubbleMaxHealth": {
          "eval": "StatBubbles.getValue(token, 'max health')"
        },
        "bubbleAC": {
          "eval": "StatBubbles.getValue(token, 'armor class')"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "StatBubbles"
        },
        {
          "type": "text",
          "text": "Manage health, AC, and temp HP via StatBubbles extension"
        },
        {
          "type": "divider"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "bubbleHealth",
              "label": "Health"
            },
            {
              "type": "value",
              "var": "bubbleMaxHealth",
              "label": "Max"
            },
            {
              "type": "value",
              "var": "bubbleAC",
              "label": "AC"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Health Management"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await StatBubbles.heal(token, 15);"
              ],
              "label": "Heal 15"
            },
            {
              "type": "button",
              "commands": [
                "await StatBubbles.heal(token, 5);"
              ],
              "label": "Heal 5"
            },
            {
              "type": "button",
              "commands": [
                "await StatBubbles.setValue(token, 'health', bubbleMaxHealth);"
              ],
              "label": "Full Heal"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await StatBubbles.damage(token, 8);"
              ],
              "label": "Damage 8"
            },
            {
              "type": "button",
              "commands": [
                "await StatBubbles.damage(token, 15);"
              ],
              "label": "Damage 15"
            },
            {
              "type": "button",
              "commands": [
                "await StatBubbles.setValue(token, 'health', 0);"
              ],
              "label": "Down to 0"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Other Stats"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await StatBubbles.setValue(token, 'temporary health', 20);"
              ],
              "label": "Set Temp HP 20"
            },
            {
              "type": "button",
              "commands": [
                "await StatBubbles.setValue(token, 'temporary health', 0);"
              ],
              "label": "Remove Temp HP"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await StatBubbles.addValue(token, 'armor class', 2);"
              ],
              "label": "AC +2"
            },
            {
              "type": "button",
              "commands": [
                "await StatBubbles.addValue(token, 'armor class', -2);"
              ],
              "label": "AC -2"
            },
            {
              "type": "button",
              "commands": [
                "const percentage = await StatBubbles.getHealthPercentage(token);",
                "console.log('Health: ' + percentage + '%');"
              ],
              "label": "Show Health %"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Combat Example"
        },
        {
          "type": "button",
          "commands": [
            "const roll = await JustDices.rollSilent('1d20 + ' + bubbleAC);",
            "if (roll > 15) {",
            "  await StatBubbles.damage(token, 10);",
            "  console.log('Attack hit for 10 damage!');",
            "} else {",
            "  console.log('Attack missed!');",
            "}"
          ],
          "label": "Attack Roll (DC 15, 10 dmg)"
        }
      ]
    },
    {
      "label": "Rings",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "ringColors": {
          "eval": "ColoredRings.getRings(token)"
        },
        "hasBlueRing": {
          "eval": "ColoredRings.hasRing(token, '#1a6aff')"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Colored Rings"
        },
        {
          "type": "text",
          "text": "Add and remove colored status rings on tokens"
        },
        {
          "type": "divider"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "hasBlueRing",
              "label": "Has Blue Ring?"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Add Rings"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await ColoredRings.addRing(token, '#1a6aff');"
              ],
              "label": "Add Blue"
            },
            {
              "type": "button",
              "commands": [
                "await ColoredRings.addRing(token, '#ff7433');"
              ],
              "label": "Add Orange"
            },
            {
              "type": "button",
              "commands": [
                "await ColoredRings.addRing(token, '#00ff00');"
              ],
              "label": "Add Green"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await ColoredRings.addRing(token, '#ff0000');"
              ],
              "label": "Add Red"
            },
            {
              "type": "button",
              "commands": [
                "await ColoredRings.addRing(token, '#ffff00');"
              ],
              "label": "Add Yellow"
            },
            {
              "type": "button",
              "commands": [
                "await ColoredRings.addRing(token, '#ff00ff');"
              ],
              "label": "Add Purple"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Remove Rings"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await ColoredRings.removeRing(token, '#1a6aff');"
              ],
              "label": "Remove Blue"
            },
            {
              "type": "button",
              "commands": [
                "await ColoredRings.removeRing(token, '#ff7433');"
              ],
              "label": "Remove Orange"
            },
            {
              "type": "button",
              "commands": [
                "await ColoredRings.removeRing(token, '#00ff00');"
              ],
              "label": "Remove Green"
            }
          ]
        },
        {
          "type": "button",
          "commands": [
            "const rings = await ColoredRings.getRings(token);",
            "console.log('Current rings:', rings);"
          ],
          "label": "Show All Rings"
        }
      ]
    },
    {
      "label": "Initiative",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "prettyHasInitiative": {
          "eval": "PrettySordid.hasInitiative(token)"
        },
        "prettyInitiativeCount": {
          "eval": "PrettySordid.getInitiativeCount(token)"
        },
        "prettyActive": {
          "eval": "PrettySordid.isActiveTurn(token)"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Pretty Sordid Initiative"
        },
        {
          "type": "text",
          "text": "Compatibility for the PrettySordid / Pretty Initiative extension — read and modify initiative stored in token metadata."
        },
        {
          "type": "divider"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "prettyHasInitiative",
              "label": "Has Initiative?"
            },
            {
              "type": "value",
              "var": "prettyInitiativeCount",
              "label": "Initiative"
            },
            {
              "type": "value",
              "var": "prettyActive",
              "label": "Active?"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Manage Initiative"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await PrettySordid.hasInitiative(token) ? await PrettySordid.setInitiativeCount(token, await PrettySordid.getInitiativeCount(token) + 1) : await PrettySordid.setInitiativeCount(token, 1);"
              ],
              "label": "Increment / Assign 1"
            },
            {
              "type": "button",
              "commands": [
                "await PrettySordid.hasInitiative(token) ? await PrettySordid.setInitiativeCount(token, await PrettySordid.getInitiativeCount(token) - 1) : null;"
              ],
              "label": "Decrement"
            },
            {
              "type": "button",
              "commands": [
                "await PrettySordid.setInitiativeCount(token, 0);"
              ],
              "label": "Reset to 0"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Quick Set"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const roll = await JustDices.rollSilent('1d20 + 3');",
                "await PrettySordid.setInitiativeCount(token, roll);",
                "console.log('Initiative set to:', roll);"
              ],
              "label": "Roll Initiative (+3)"
            },
            {
              "type": "button",
              "commands": [
                "await PrettySordid.setInitiativeCount(token, 20);"
              ],
              "label": "Set to 20"
            },
            {
              "type": "button",
              "commands": [
                "await PrettySordid.setInitiativeCount(token, 10);"
              ],
              "label": "Set to 10"
            }
          ]
        }
      ]
    },
    {
      "label": "Dice",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "JustDices"
        },
        {
          "type": "text",
          "text": "Roll dice and get results in Owlbear Rodeo"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Basic Rolls"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d20');"
              ],
              "label": "Roll d20"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d12');"
              ],
              "label": "Roll d12"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d10');"
              ],
              "label": "Roll d10"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d8');"
              ],
              "label": "Roll d8"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d6');"
              ],
              "label": "Roll d6"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d4');"
              ],
              "label": "Roll d4"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "With Modifiers"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d20 + 5');"
              ],
              "label": "d20 + 5"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('2d6 + 3');"
              ],
              "label": "2d6 + 3"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('3d6');"
              ],
              "label": "3d6"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Damage Rolls"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('2d6 + 4');"
              ],
              "label": "Greatsword (2d6+4)"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('1d8 + 3');"
              ],
              "label": "Longsword (1d8+3)"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('8d6');"
              ],
              "label": "Fireball (8d6)"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Silent Rolls (for logic)"
        },
        {
          "type": "button",
          "commands": [
            "const roll = await JustDices.rollSilent('1d20');",
            "if (roll >= 15) {",
            "  console.log('Success! (' + roll + ')');",
            "} else {",
            "  console.log('Failure! (' + roll + ')');",
            "}"
          ],
          "label": "Silent Roll + Logic"
        },
        {
          "type": "button",
          "commands": [
            "const rollObj = await JustDices.getRollObjectSilent('1d20 + 5');",
            "console.log('Roll object:', rollObj);"
          ],
          "label": "Get Roll Object"
        }
      ]
    },
    {
      "label": "Local",
      "variables": {
        "inputName": {
          "value": "Enter name here"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Local Storage"
        },
        {
          "type": "text",
          "text": "Store and retrieve values in browser localStorage"
        },
        {
          "type": "divider"
        },
        {
          "type": "input",
          "var": "inputName",
          "label": "Enter Name",
          "placeholder": "Type a name..."
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('Global Player Name: ' + playerName);"
              ],
              "label": "Show Global Name"
            },
            {
              "type": "button",
              "commands": [
                "await JustDices.roll('Input Name: ' + inputName);"
              ],
              "label": "Show Input Name"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Save & Retrieve"
        },
        {
          "type": "button",
          "commands": [
            "await Local.set('playerName', inputName);"
          ],
          "label": "Save Input as Player Name"
        },
        {
          "type": "button",
          "commands": [
            "await JustDices.roll('Player: ' + await Local.value('playerName', 'Unknown'));"
          ],
          "label": "Show Saved Player Name"
        },
        {
          "type": "button",
          "commands": [
            "const keys = await Local.keys();",
            "console.log('Stored keys:', keys);"
          ],
          "label": "List All Keys"
        },
        {
          "type": "button",
          "commands": [
            "await Local.clear();",
            "console.log('Local storage cleared');"
          ],
          "label": "Clear All Storage"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Examples"
        },
        {
          "type": "button",
          "commands": [
            "await Local.set('counter', (await Local.value('counter', 0)) + 1);",
            "const count = await Local.value('counter', 0);",
            "console.log('Counter:', count);"
          ],
          "label": "Increment Counter"
        },
        {
          "type": "button",
          "commands": [
            "await Local.set('lastRoll', await JustDices.rollSilent('1d20'));",
            "console.log('Saved last roll:', await Local.value('lastRoll', 0));"
          ],
          "label": "Save Last Roll"
        }
      ]
    },
    {
      "label": "Weather",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Weather Effects"
        },
        {
          "type": "text",
          "text": "Add weather effects to maps"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Weather Types"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'SNOW', speed: 2, density: 3 });"
              ],
              "label": "Snow"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'RAIN', speed: 3, density: 4 });"
              ],
              "label": "Rain"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'SAND', speed: 2, density: 3 });"
              ],
              "label": "Sand"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'FIRE', speed: 1, density: 2 });"
              ],
              "label": "Fire"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'CLOUD', speed: 1, density: 3 });"
              ],
              "label": "Cloud"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'BLOOM', speed: 1, density: 2 });"
              ],
              "label": "Bloom"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'ENERGYSTORM', speed: 2, density: 3 });"
              ],
              "label": "Energy Storm"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'WATER', speed: 1, density: 2 });"
              ],
              "label": "Water"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.setWeather(mapId, { type: 'CURRENT', speed: 2, density: 3 });"
              ],
              "label": "Current"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Weather Tints"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.updateWeather(mapId, { tint: '#88aaff' });"
              ],
              "label": "Blue Tint"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.updateWeather(mapId, { tint: '#ff8844' });"
              ],
              "label": "Orange Tint"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.updateWeather(mapId, { tint: '#88ff88' });"
              ],
              "label": "Green Tint"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Controls"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "const config = await Weather.getWeather(mapId);",
                "console.log('Weather config:', config);"
              ],
              "label": "Show Config"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "const has = await Weather.hasWeather(mapId);",
                "console.log('Has weather:', has);"
              ],
              "label": "Check Weather"
            },
            {
              "type": "button",
              "commands": [
                "const mapId = await getMapIdFromToken(token);",
                "await Weather.removeWeather(mapId);"
              ],
              "label": "Remove Weather"
            }
          ]
        }
      ]
    },
    {
      "label": "Embers",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Embers - Spell Effects"
        },
        {
          "type": "text",
          "text": "Visual spell effects  using Embers extension"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Quick Spells"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castProjectileFromTo(token, targetId, { id: 'magic_missile', copies: 3 });"
              ],
              "label": "Magic Missile"
            },
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castSpellAtToken(targetId, { id: 'cure_wounds', size: 2 });"
              ],
              "label": "Cure Wounds"
            },
            {
              "type": "button",
              "commands": [
                "await Embers.castSpellAtToken(token, { id: 'shield.hit', size: 2 });"
              ],
              "label": "Shield"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castProjectileFromTo(token, targetId, { id: 'fireball.beam' });",
                "await Embers.castSpellAtToken(targetId, { id: 'fireball.explosion', size: 4, delay: 1000 });"
              ],
              "label": "Fireball"
            },
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castConeSpell(token, targetId, { id: 'burning_hands', size: 6 });"
              ],
              "label": "Burning Hands"
            },
            {
              "type": "button",
              "commands": [
                "await Embers.castSpellAtToken(token, { id: 'bless', size: 6 });"
              ],
              "label": "Bless"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "AOE Spells"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castSpellAtToken(targetId, { id: 'thunderwave', size: 4 });"
              ],
              "label": "Thunderwave"
            },
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castSpellAtToken(targetId, { id: 'ice_storm', size: 8 });"
              ],
              "label": "Ice Storm"
            },
            {
              "type": "button",
              "commands": [
                "const targetId = await getSelectedTokenId();",
                "if (!targetId) return console.error('Select a target');",
                "await Embers.castSpellAtToken(targetId, { id: 'spirit_guardians.loop', loops: 5, size: 6 });"
              ],
              "label": "Spirit Guardians"
            }
          ]
        }
      ]
    },
    {
      "label": "Layout",
      "variables": {
        "textVar": {
          "value": "Hello World"
        },
        "numberVar": {
          "value": 42
        },
        "counterVar": {
          "value": 10
        },
        "checkboxVar": {
          "value": true
        },
        "inputVar": {
          "value": "Enter text here"
        },
        "dropdownVar": {
          "value": "Option 1"
        },
        "dropdownModeVar": {
          "value": "normal"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Layout Examples"
        },
        {
          "type": "text",
          "text": "This page demonstrates all available layout types"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Display Types"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "textVar",
              "label": "Text Value"
            },
            {
              "type": "value",
              "var": "numberVar",
              "label": "Number Value"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Input Types"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "counter",
              "var": "counterVar",
              "label": "Counter",
              "step": 5
            },
            {
              "type": "counter",
              "var": "numberVar",
              "label": "Counter (step 1)"
            }
          ]
        },
        {
          "type": "input",
          "var": "inputVar",
          "label": "Text Input",
          "placeholder": "Type something..."
        },
        {
          "type": "checkbox",
          "var": "checkboxVar",
          "label": "Checkbox Example"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "dropdown",
              "var": "dropdownVar",
              "label": "Dropdown Example",
              "options": [
                "Option 1",
                "Option 2",
                "Option 3"
              ]
            },
            {
              "type": "dropdown",
              "var": "dropdownModeVar",
              "label": "Game Mode",
              "options": [
                {
                  "label": "Easy",
                  "value": "easy"
                },
                {
                  "label": "Normal",
                  "value": "normal"
                },
                {
                  "label": "Hard",
                  "value": "hard"
                }
              ]
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Stack Demo"
        },
        {
          "type": "text",
          "text": "Demonstrates the `stack` container."
        },
        {
          "type": "row",
          "children": [
            {
              "type": "text",
              "text": "This is a row containing a stack:"
            },
            {
              "type": "stack",
              "children": [
                {
                  "type": "value",
                  "var": "textVar",
                  "label": "Base Value"
                },
                {
                  "type": "button",
                  "label": "Button",
                  "commands": [
                    "await JustDices.roll('1d6');"
                  ]
                },
                {
                  "type": "button",
                  "label": "Button",
                  "commands": [
                    "await JustDices.roll('1d6');"
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Button"
        },
        {
          "type": "button",
          "label": "Example Button",
          "commands": [
            "await JustDices.roll('1d20');"
          ]
        }
      ]
    },
    {
      "label": "Tests",
      "variables": {
        "spdCS": {
          "value": 15,
          "expression": -3
        },
        "floorResult": {
          "eval": "Math.floor(spdCS / 2)"
        },
        "testToken": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "mapIdFromToken": {
          "eval": "getMapIdFromToken(testToken)"
        },
        "dropdownOptions": {
          "value": [
            "Option A",
            "Option B",
            "Option C",
            "Option D"
          ]
        },
        "selectedOption": {
          "value": "Option A"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Testing Area"
        },
        {
          "type": "text",
          "text": "Use this page for testing new features and commands."
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "spdCS",
              "label": "spdCS"
            },
            {
              "type": "value",
              "var": "floorResult",
              "label": "floor({spdCS}/2)"
            }
          ]
        },
        {
          "type": "button",
          "commands": [
            "await JustDices.roll('floorResult: ' + floorResult);"
          ],
          "label": "Show floor result"
        },
        {
          "type": "button",
          "commands": [
            "await JustDices.roll('1d10');"
          ],
          "label": "Test Roll"
        },
        {
          "type": "button",
          "commands": [
            "await JustDices.roll('1d10');"
          ],
          "label": "Test Roll2"
        },
        {
          "type": "button",
          "commands": [
            "await JustDices.roll('1d10 + ' + spdCS);"
          ],
          "label": "Test with spdCS"
        },
        {
          "type": "button",
          "commands": [
            "result = await JustDices.roll('1d20');",
            "message = result > 10 ? 'Effect' : 'No Effect';",
            "message += result == 20 ? ' (Critical)' : '';",
            "console.log(`Result: ${result} - ${message}`);"
          ],
          "label": "Test Async"
        },
        {
          "type": "button",
          "commands": [
            "const healAmount = 15;",
            "const currentHP = trackerHP;",
            "const maxHP = trackerMaxHP;",
            "const newHP = min(currentHP + healAmount, maxHP);",
            "await OwlTrackers.setValue(token, 'HP', newHP);",
            "console.log(`Healed ${newHP - currentHP} HP`);"
          ],
          "label": "Multi-line Script Example"
        },
        {
          "type": "button",
          "commands": [
            "const roll = await JustDices.roll('1d20');",
            "if (roll >= 15) {",
            "  await addValue('spdCS', 2);",
            "  console.log('Success! +2 speed');",
            "} else if (roll >= 10) {",
            "  await addValue('spdCS', 1);",
            "  console.log('Partial success! +1 speed');",
            "} else {",
            "  console.log('Failure!');",
            "}"
          ],
          "label": "Conditional Logic Example"
        },
        {
          "type": "button",
          "commands": [
            "for (let i = 0; i < 3; i++) {",
            "  const roll = await JustDices.roll('1d6');",
            "  console.log(`Roll ${i + 1}: ${roll}`);",
            "}"
          ],
          "label": "Loop Example"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Dropdown with Array"
        },
        {
          "type": "dropdown",
          "var": "selectedOption",
          "label": "Select from Array",
          "optionsVar": "dropdownOptions"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "selectedOption",
              "label": "Selected Value"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Scene Helpers Tests"
        },
        {
          "type": "text",
          "text": "Test scene helper functions"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "mapIdFromToken",
              "label": "Map ID"
            }
          ]
        },
        {
          "type": "button",
          "commands": [
            "mapId = await getMapIdFromToken(testToken);",
            "console.log('Map ID: ' + (mapId || 'Not on a map'));"
          ],
          "label": "Get Map ID from Token"
        },
        {
          "type": "button",
          "commands": [
            "tokenId = await getClosestTokenId(testToken, { layers: ['CHARACTER', 'MOUNT'], excludeOverlapping: true });",
            "console.log('Closest Token Id: ' + (tokenId || 'No token found'));"
          ],
          "label": "Get Closest Token Id"
        }
      ]
    },
    {
      "label": "Tokens",
      "variables": {
        "tokenUrl": {
          "value": "https://docs.owlbear.rodeo/img/logo.svg"
        },
        "tokenName": {
          "value": "New Token"
        },
        "tokenX": {
          "value": 500
        },
        "tokenY": {
          "value": 500
        },
        "tokenSize": {
          "value": 1
        },
        "gridX": {
          "value": 5
        },
        "gridY": {
          "value": 5
        },
        "createdTokenId": {
          "value": ""
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Token Creation"
        },
        {
          "type": "text",
          "text": "Create tokens on the scene using tokenHelpers"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Simple Token Creation"
        },
        {
          "type": "input",
          "var": "tokenUrl",
          "label": "Token Image URL"
        },
        {
          "type": "input",
          "var": "tokenName",
          "label": "Token Name"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "input",
              "var": "tokenX",
              "label": "Position X"
            },
            {
              "type": "input",
              "var": "tokenY",
              "label": "Position Y"
            }
          ]
        },
        {
          "type": "input",
          "var": "tokenSize",
          "label": "Token Size (grid cells)"
        },
        {
          "type": "button",
          "commands": [
            "const tokenId = await createToken({",
            "  url: tokenUrl,",
            "  position: { x: tokenX, y: tokenY },",
            "  size: tokenSize,",
            "  label: tokenName",
            "});",
            "await setValue('createdTokenId', tokenId);"
          ],
          "label": "Create Token"
        },
        {
          "type": "value",
          "var": "createdTokenId",
          "label": "Created Token ID"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Grid-Based Token Creation"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "input",
              "var": "gridX",
              "label": "Grid X"
            },
            {
              "type": "input",
              "var": "gridY",
              "label": "Grid Y"
            }
          ]
        },
        {
          "type": "button",
          "commands": [
            "const tokenId = await createToken({",
            "  url: tokenUrl,",
            "  position: { x: gridX, y: gridY },",
            "  gridPosition: true,",
            "  name: tokenName,",
            "  size: tokenSize",
            "});",
            "await setValue('createdTokenId', tokenId);"
          ],
          "label": "Create Token at Grid Position"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Quick Examples"
        },
        {
          "type": "button",
          "commands": [
            "await createToken({",
            "  url: 'SELECT',",
            "  name: 'Hero',",
            "  position: { x: 300, y: 300 },",
            "  size: 1.5,",
            "  layer: 'MOUNT',",
            "});"
          ],
          "label": "Create Demo Hero (1.5 cells)"
        },
        {
          "type": "button",
          "commands": [
            "const enemyPositions = [",
            "  { x: 600, y: 400 },",
            "  { x: 800, y: 400 },",
            "  { x: 700, y: 600 }",
            "];",
            "const tokens = enemyPositions.map((pos, i) => ({",
            "  url: 'EMPTY',",
            "  size: 1.0,",
            "  position: pos,",
            "  name: `Enemy ${i + 1}`,",
            "  label: `E${i + 1}`",
            "}));",
            "await createTokens(tokens);"
          ],
          "label": "Create 3 Enemies (1 cell each)"
        },
        {
          "type": "button",
          "commands": [
            "const tokenId = await createToken({",
            "  url: 'https://sewef.github.io/justDices/JustDices.png',",
            "  position: { x: 500, y: 500 },",
            "  name: 'Boss',",
            "  label: 'BOSS',",
            "  size: 3.0",
            "});",
            "",
            "// Add HP tracker (value-max variant)",
            "await OwlTrackers.addTracker(tokenId, {",
            "  variant: 'value-max',",
            "  name: 'HP',",
            "  value: 100,",
            "  max: 100,",
            "  color: 2",
            "});",
            "",
            "console.log('Created boss with ID:', tokenId);"
          ],
          "label": "Create Boss (3 cells) with HP & Metadata"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Tracker Management Examples"
        },
        {
          "type": "button",
          "commands": [
            "const tokenId = await createToken({",
            "  url: 'https://sewef.github.io/ptu/img/logo64.png',",
            "  position: { x: 400, y: 400 },",
            "  name: 'Character with Trackers',",
            "  size: 1.5",
            "});",
            "",
            "// Add HP tracker (value-max variant)",
            "await OwlTrackers.addTracker(tokenId, {",
            "  variant: 'value-max',",
            "  name: 'HP',",
            "  value: 103,",
            "  max: 103,",
            "  color: 2",
            "});",
            "",
            "// Add Temp HP tracker (value variant)",
            "await OwlTrackers.addTracker(tokenId, {",
            "  variant: 'value',",
            "  name: 'Add HP',",
            "  value: 10,",
            "  color: 5",
            "});",
            "",
            "// Add Injuries counter",
            "await OwlTrackers.addTracker(tokenId, {",
            "  variant: 'counter',",
            "  name: 'Injuries',",
            "  value: 5,",
            "  color: 2,",
            "  inlineMath: false",
            "});",
            "",
            "// Add unnamed counter",
            "await OwlTrackers.addTracker(tokenId, {",
            "  variant: 'counter',",
            "  value: 0,",
            "  color: 8,",
            "  inlineMath: false",
            "});",
            "",
            "await setValue('createdTokenId', tokenId);",
            "console.log('Created token with multiple trackers:', tokenId);"
          ],
          "label": "Create Token with Multiple Trackers"
        },
        {
          "type": "button",
          "commands": [
            "if (!createdTokenId) {",
            "  console.error('No token ID available. Create a token first.');",
            "  return;",
            "}",
            "",
            "// Remove 'Temp HP' tracker",
            "const removed = await OwlTrackers.removeTracker(createdTokenId, 'Temp HP');",
            "if (removed) {",
            "  console.log('Removed Temp HP tracker from token');",
            "} else {",
            "  console.log('Temp HP tracker not found');",
            "}"
          ],
          "label": "Remove 'Temp HP' Tracker"
        }
      ]
    },
    {
      "label": "Aurora",
      "variables": {
        "token": {
          "value": "996ed434-a22c-4510-aa82-9df34820c0be"
        },
        "mapId": {
          "eval": "getMapIdFromToken(token)"
        },
        "auroraConfig": {
          "eval": "Aurora.getAurora(mapId)"
        },
        "hasAurora": {
          "eval": "Aurora.hasAurora(mapId)"
        },
        "saturation": {
          "value": 100
        },
        "lightness": {
          "value": 100
        },
        "hue": {
          "value": 0
        },
        "opacity": {
          "value": 40
        },
        "blendMode": {
          "value": 3
        },
        "feather": {
          "value": 0
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Aurora Integration"
        },
        {
          "type": "text",
          "text": "Control time-of-day lighting effects on maps"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Current Status"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "value",
              "var": "hasAurora",
              "label": "Aurora Active?"
            },
            {
              "type": "value",
              "var": "mapId",
              "label": "Map ID"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const myConfig = await Aurora.getAurora(mapId);",
                "if (myConfig) {",
                "  console.log('Aurora Config:', JSON.stringify(myConfig, null, 2));",
                "} else {",
                "  console.log('No Aurora configuration active');",
                "}"
              ],
              "label": "Show Full Config"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Presets"
        },
        {
          "type": "text",
          "text": "Apply predefined lighting presets"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, 'MIDNIGHT');"
              ],
              "label": "Midnight"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, 'GOLDEN_HOUR');"
              ],
              "label": "Golden Hour"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, 'PRE_DAWN');"
              ],
              "label": "Pre-Dawn"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, 'BLOOD_MOON');"
              ],
              "label": "Blood Moon"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Quick Presets"
        },
        {
          "type": "text",
          "text": "Common lighting scenarios"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, {",
                "  saturation: 100,",
                "  lightness: 100,",
                "  hue: 0,",
                "  opacity: 0,",
                "  enabled: true,",
                "  name: 'Normal Light'",
                "});"
              ],
              "label": "Normal Light"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, {",
                "  saturation: 60,",
                "  lightness: 60,",
                "  hue: 180,",
                "  opacity: 30,",
                "  enabled: true,",
                "  blendMode: 3,",
                "  name: 'Night Time'",
                "});"
              ],
              "label": "Night Time"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, {",
                "  saturation: 130,",
                "  lightness: 110,",
                "  hue: 25,",
                "  opacity: 25,",
                "  enabled: true,",
                "  blendMode: 2,",
                "  name: 'Sunset'",
                "});"
              ],
              "label": "Sunset"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, {",
                "  saturation: 40,",
                "  lightness: 40,",
                "  hue: 0,",
                "  opacity: 50,",
                "  enabled: true,",
                "  blendMode: 0,",
                "  name: 'Dark Cave'",
                "});"
              ],
              "label": "Dark Cave"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, {",
                "  saturation: 150,",
                "  lightness: 120,",
                "  hue: -30,",
                "  opacity: 20,",
                "  enabled: true,",
                "  blendMode: 2,",
                "  name: 'Desert Heat'",
                "});"
              ],
              "label": "Desert Heat"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.setAurora(mapId, {",
                "  saturation: 70,",
                "  lightness: 90,",
                "  hue: 120,",
                "  opacity: 25,",
                "  enabled: true,",
                "  blendMode: 3,",
                "  name: 'Mystic Forest'",
                "});"
              ],
              "label": "Mystic Forest"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Custom Configuration"
        },
        {
          "type": "text",
          "text": "Adjust individual properties"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "counter",
              "var": "saturation",
              "label": "Saturation (0-200)",
              "step": 10
            },
            {
              "type": "counter",
              "var": "lightness",
              "label": "Lightness (0-200)",
              "step": 10
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "counter",
              "var": "hue",
              "label": "Hue (-180 to 180)",
              "step": 15
            },
            {
              "type": "counter",
              "var": "opacity",
              "label": "Opacity (0-100)",
              "step": 5
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "counter",
              "var": "blendMode",
              "label": "Blend Mode (0-3)",
              "step": 1
            },
            {
              "type": "counter",
              "var": "feather",
              "label": "Feather (0-100)",
              "step": 10
            }
          ]
        },
        {
          "type": "button",
          "commands": [
            "const mapId = await getMapIdFromToken(token);",
            "await Aurora.setAurora(mapId, {",
            "  saturation: saturation,",
            "  lightness: lightness,",
            "  hue: hue,",
            "  opacity: opacity,",
            "  enabled: true,",
            "  blendMode: blendMode,",
            "  feather: feather,",
            "  name: 'Custom'",
            "});"
          ],
          "label": "Apply Custom Settings"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Update Properties"
        },
        {
          "type": "text",
          "text": "Modify existing Aurora configuration"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Aurora.updateAurora(mapId, { opacity: opacity });"
              ],
              "label": "Update Opacity"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.updateAurora(mapId, { hue: hue });"
              ],
              "label": "Update Hue"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.updateAurora(mapId, { enabled: true });"
              ],
              "label": "Enable"
            }
          ]
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Aurora.updateAurora(mapId, { enabled: false });"
              ],
              "label": "Disable"
            },
            {
              "type": "button",
              "commands": [
                "const current = await Aurora.getAurora(mapId);",
                "if (current) {",
                "  await Aurora.updateAurora(mapId, {",
                "    saturation: current.saturation + 20,",
                "    lightness: current.lightness - 10",
                "  });",
                "}"
              ],
              "label": "Brighten (+20 sat, -10 light)"
            },
            {
              "type": "button",
              "commands": [
                "const current = await Aurora.getAurora(mapId);",
                "if (current) {",
                "  await Aurora.updateAurora(mapId, {",
                "    saturation: current.saturation - 20,",
                "    lightness: current.lightness + 10",
                "  });",
                "}"
              ],
              "label": "Darken (-20 sat, +10 light)"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Controls"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "const currentConfig = await Aurora.getAurora(mapId);",
                "console.log('Aurora Config:', currentConfig);"
              ],
              "label": "Show Config"
            },
            {
              "type": "button",
              "commands": [
                "const presets = Aurora.getPresets();",
                "console.log('Available Presets:', presets);"
              ],
              "label": "List Presets"
            },
            {
              "type": "button",
              "commands": [
                "await Aurora.removeAurora(mapId);"
              ],
              "label": "Remove Aurora"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Time of Day Cycle"
        },
        {
          "type": "text",
          "text": "Simulate a day/night cycle"
        },
        {
          "type": "button",
          "commands": [
            "const mapId = await getMapIdFromToken(token);",
            "const cycle = [",
            "  { preset: 'PRE_DAWN', delay: 0, name: 'Pre-Dawn' },",
            "  { preset: 'GOLDEN_HOUR', delay: 2000, name: 'Sunrise' },",
            "  { config: { saturation: 100, lightness: 100, hue: 0, opacity: 0, enabled: true }, delay: 4000, name: 'Day' },",
            "  { preset: 'GOLDEN_HOUR', delay: 6000, name: 'Sunset' },",
            "  { preset: 'MIDNIGHT', delay: 8000, name: 'Night' }",
            "];",
            "",
            "for (const phase of cycle) {",
            "  setTimeout(async () => {",
            "    console.log('Time of Day:', phase.name);",
            "    if (phase.preset) {",
            "      await Aurora.setAurora(mapId, phase.preset);",
            "    } else {",
            "      await Aurora.setAurora(mapId, phase.config);",
            "    }",
            "  }, phase.delay);",
            "}",
            "",
            "console.log('Day/Night cycle started (10 seconds)');"
          ],
          "label": "Start Day/Night Cycle"
        }
      ]
    },
    {
      "label": "Announcement",
      "variables": {
        "announcementData": {
          "eval": "Announcement.getAnnouncement()"
        }
      },
      "layout": [
        {
          "type": "title",
          "text": "Announcement System"
        },
        {
          "type": "text",
          "text": "Room-level announcements with Markdown support (dev.sharkbrain.announcement)"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Current Status"
        },
        {
          "type": "button",
          "commands": [
            "const announcement = await Announcement.getAnnouncement();",
            "if (announcement) {",
            "  console.log('Announcement Status:', announcement);",
            "  console.log('Active:', announcement.active);",
            "  console.log('Content:', announcement.content);",
            "} else {",
            "  console.log('No announcement configured');",
            "}"
          ],
          "label": "Show Full Status"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Custom Announcement"
        },
        {
          "type": "text",
          "text": "Create custom announcement with Markdown"
        },
        {
          "type": "button",
          "commands": [
            "const content = '# Test Announcement\\n\\nThis is a **bold** test with *italic* text.\\n\\n- Item 1\\n- Item 2\\n- Item 3';",
            "await Announcement.setAnnouncement(content, true);"
          ],
          "label": "Create Test Announcement"
        },
        {
          "type": "button",
          "commands": [
            "const content = '## Important Notice\\n\\nPlease check your inventory before the next encounter.\\n\\n### Items to Bring:\\n1. Healing potions\\n2. Rope\\n3. Torches';",
            "await Announcement.setAnnouncement(content, true);"
          ],
          "label": "Create Inventory Notice"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Visibility Controls"
        },
        {
          "type": "text",
          "text": "Show/hide announcements"
        },
        {
          "type": "row",
          "children": [
            {
              "type": "button",
              "commands": [
                "await Announcement.showAnnouncement();"
              ],
              "label": "Show"
            },
            {
              "type": "button",
              "commands": [
                "await Announcement.hideAnnouncement();"
              ],
              "label": "Hide"
            },
            {
              "type": "button",
              "commands": [
                "const newState = await Announcement.toggleAnnouncement();",
                "console.log('Announcement now:', newState ? 'visible' : 'hidden');"
              ],
              "label": "Toggle"
            }
          ]
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Update Operations"
        },
        {
          "type": "text",
          "text": "Modify existing announcement"
        },
        {
          "type": "button",
          "commands": [
            "await Announcement.updateContent('# Updated Content\\n\\nThis announcement has been updated!');"
          ],
          "label": "Update Content Only"
        },
        {
          "type": "button",
          "commands": [
            "await Announcement.updateAnnouncement({ active: false });"
          ],
          "label": "Update Active Only"
        },
        {
          "type": "button",
          "commands": [
            "await Announcement.updateAnnouncement({",
            "  content: '## Updated via Object\\n\\nBoth content and state updated.',",
            "  active: true",
            "});"
          ],
          "label": "Update Both"
        },
        {
          "type": "divider"
        },
        {
          "type": "title",
          "text": "Management"
        },
        {
          "type": "button",
          "commands": [
            "await Announcement.removeAnnouncementMetadata();",
            "console.log('Announcement removed');"
          ],
          "label": "Remove Announcement Metadata"
        }
      ]
    }
  ]
}
